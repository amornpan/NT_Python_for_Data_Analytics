# üîç ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢

## üìã ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç
- [üéØ ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç](#-‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)
- [üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏Å‡∏π‡πâ (Borrower Profile)](#-‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏Å‡∏π‡πâ-borrower-profile)
- [üí∞ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠ (Loan Details)](#-‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠-loan-details)
- [üí≥ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï (Credit History)](#-‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï-credit-history)
- [üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞ (Payment Information)](#-‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞-payment-information)
- [üìà ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå](#-‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå)
- [‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô](#Ô∏è-‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)

---

## üéØ ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

### üé™ **Target Variables (‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢)**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ |
|--------|--------|-----------|----------------|
| **`loan_status`** | Categorical | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠ | Fully Paid, Charged Off, Current, Late (31-120 days), In Grace Period, Late (16-30 days), Default |

#### **‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Binary Classification**
```python
# ‡πÅ‡∏õ‡∏•‡∏á loan_status ‡πÄ‡∏õ‡πá‡∏ô binary
def create_binary_target(loan_status):
    good_status = ['Fully Paid', 'Current']
    bad_status = ['Charged Off', 'Default', 'Late (31-120 days)', 'Late (16-30 days)']
    
    if loan_status in good_status:
        return 0  # Good loan
    elif loan_status in bad_status:
        return 1  # Bad loan
    else:
        return None  # Exclude from analysis

# ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
df['is_bad_loan'] = df['loan_status'].apply(create_binary_target)
```

### üîë **Key Predictors (‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏´‡∏•‡∏±‡∏Å)**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç | Business Impact |
|--------|-----------|-----------------|
| `grade` / `sub_grade` | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏Å‡∏£‡∏î‡πÇ‡∏î‡∏¢ Lending Club |
| `fico_range_low` / `fico_range_high` | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô |
| `dti` | ‚≠ê‚≠ê‚≠ê‚≠ê | ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏µ‡πâ‡∏ï‡πà‡∏≠‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ |
| `annual_inc` | ‚≠ê‚≠ê‚≠ê‚≠ê | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞ |
| `revol_util` | ‚≠ê‚≠ê‚≠ê‚≠ê | ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï |
| `delinq_2yrs` | ‚≠ê‚≠ê‚≠ê‚≠ê | ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏ô‡∏±‡∏î‡∏ä‡∏≥‡∏£‡∏∞ |
| `inq_last_6mths` | ‚≠ê‚≠ê‚≠ê | ‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î |
| `open_acc` | ‚≠ê‚≠ê‚≠ê | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà |

---

## üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏Å‡∏π‡πâ (Borrower Profile)

### üíº **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (Employment Information)**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á | ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô |
|--------|--------|-----------|----------|-----------|
| `emp_title` | Text | ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô | "Teacher", "Manager", "Engineer" | Text Analysis, Job Category |
| `emp_length` | Categorical | ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô | "< 1 year", "2 years", "10+ years" | Stability Indicator |
| `annual_inc` | Numeric | ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡∏õ‡∏µ ($) | 65000.0 | Payment Capacity |
| `verification_status` | Categorical | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ | "Verified", "Source Verified", "Not Verified" | Data Quality |

#### **‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• Employment Length**
```python
# ‡πÅ‡∏õ‡∏•‡∏á emp_length ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
def process_emp_length(emp_length):
    if pd.isna(emp_length) or emp_length == 'n/a':
        return 0
    elif '< 1' in str(emp_length):
        return 0.5
    elif '10+' in str(emp_length):
        return 10
    else:
        return float(str(emp_length).split()[0])

df['emp_length_numeric'] = df['emp_length'].apply(process_emp_length)
```

### üè† **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢ (Housing Information)**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à |
|--------|--------|-----------|----------------|-------------------|
| `home_ownership` | Categorical | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢ | RENT, OWN, MORTGAGE, OTHER | Financial Stability |
| `addr_state` | Categorical | ‡∏£‡∏±‡∏ê‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢ | CA, NY, TX, FL, etc. | Geographic Risk |
| `zip_code` | Categorical | ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå (3 ‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏£‡∏Å) | 481xx, 100xx | Regional Analysis |

#### **‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå Geographic Risk**
```python
# ‡∏™‡∏£‡πâ‡∏≤‡∏á risk score ‡∏ï‡∏≤‡∏°‡∏£‡∏±‡∏ê
state_default_rates = df.groupby('addr_state')['is_bad_loan'].mean().sort_values(ascending=False)

# ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏±‡∏ê
def assign_state_risk(state):
    if state in state_default_rates.head(10).index:
        return 'High Risk'
    elif state in state_default_rates.tail(10).index:
        return 'Low Risk'
    else:
        return 'Medium Risk'

df['state_risk_level'] = df['addr_state'].apply(assign_state_risk)
```

---

## üí∞ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠ (Loan Details)

### üìä **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡πà‡∏≤ | ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏• |
|--------|--------|-----------|---------|---------------|
| `loan_amnt` | Numeric | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏Ç‡∏≠ ($) | 1,000 - 40,000 | Loan Size Risk |
| `funded_amnt` | Numeric | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏à‡∏£‡∏¥‡∏á ($) | ‚â§ loan_amnt | Market Demand |
| `funded_amnt_inv` | Numeric | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô ($) | ‚â§ funded_amnt | Investor Appetite |
| `int_rate` | Numeric | ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (%) | 5.32 - 28.99 | Risk Pricing |
| `installment` | Numeric | ‡∏¢‡∏≠‡∏î‡∏ú‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ($) | ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å loan_amnt + int_rate | Payment Burden |

#### **‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°**
```python
# Payment to Income Ratio
df['payment_to_income'] = (df['installment'] * 12) / df['annual_inc']

# Funding Ratio
df['funding_ratio'] = df['funded_amnt'] / df['loan_amnt']

# Loan Amount Categories
def categorize_loan_amount(amount):
    if amount < 5000:
        return 'Small'
    elif amount < 15000:
        return 'Medium'
    elif amount < 25000:
        return 'Large'
    else:
        return 'Very Large'

df['loan_size_category'] = df['loan_amnt'].apply(categorize_loan_amount)
```

### üéØ **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏£‡∏î‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç |
|--------|--------|-----------|----------------|-----------|
| `grade` | Categorical | ‡πÄ‡∏Å‡∏£‡∏î‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏±‡∏Å | A, B, C, D, E, F, G | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| `sub_grade` | Categorical | ‡πÄ‡∏Å‡∏£‡∏î‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡πà‡∏≠‡∏¢ | A1-A5, B1-B5, ..., G1-G5 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| `term` | Categorical | ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞ | "36 months", "60 months" | ‚≠ê‚≠ê‚≠ê‚≠ê |

#### **Grade Risk Analysis**
```python
# ‡∏™‡∏£‡πâ‡∏≤‡∏á Grade Risk Score
grade_mapping = {'A': 1, 'B': 2, 'C': 3, 'D': 4, 'E': 5, 'F': 6, 'G': 7}
df['grade_numeric'] = df['grade'].map(grade_mapping)

# Sub-grade Risk Score
def subgrade_to_numeric(subgrade):
    if pd.isna(subgrade):
        return None
    grade_map = {'A': 1, 'B': 2, 'C': 3, 'D': 4, 'E': 5, 'F': 6, 'G': 7}
    grade = subgrade[0]
    number = int(subgrade[1])
    return grade_map[grade] + (number - 1) * 0.2

df['subgrade_numeric'] = df['sub_grade'].apply(subgrade_to_numeric)
```

### üé™ **‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢ | Risk Level |
|--------|--------|-----------|-----------|-----------|
| `purpose` | Categorical | ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ | debt_consolidation (59%), credit_card (18%) | ‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó |
| `title` | Text | ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠ | Free text description | Text Analysis |

#### **Purpose Risk Analysis**
```python
# ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå
purpose_risk = df.groupby('purpose').agg({
    'is_bad_loan': ['mean', 'count'],
    'int_rate': 'mean',
    'loan_amnt': 'mean'
}).round(3)

# ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå
high_risk_purposes = ['small_business', 'renewable_energy', 'educational']
medium_risk_purposes = ['debt_consolidation', 'credit_card', 'home_improvement']
low_risk_purposes = ['car', 'major_purchase', 'medical']

def categorize_purpose_risk(purpose):
    if purpose in high_risk_purposes:
        return 'High Risk'
    elif purpose in medium_risk_purposes:
        return 'Medium Risk'
    else:
        return 'Low Risk'

df['purpose_risk_category'] = df['purpose'].apply(categorize_purpose_risk)
```

---

## üí≥ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï (Credit History)

### üìä **‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï (Credit Score)**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡πà‡∏≤ | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç |
|--------|--------|-----------|---------|-----------|
| `fico_range_low` | Numeric | FICO Score ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ | 580-850 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| `fico_range_high` | Numeric | FICO Score ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î | 584-850 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| `last_fico_range_low` | Numeric | FICO Score ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥) | Updated score | ‚≠ê‚≠ê‚≠ê‚≠ê |
| `last_fico_range_high` | Numeric | FICO Score ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î) | Updated score | ‚≠ê‚≠ê‚≠ê‚≠ê |

#### **FICO Score Processing**
```python
# ‡∏™‡∏£‡πâ‡∏≤‡∏á FICO Score ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
df['fico_score_avg'] = (df['fico_range_low'] + df['fico_range_high']) / 2
df['last_fico_score_avg'] = (df['last_fico_range_low'] + df['last_fico_range_high']) / 2

# FICO Score Categories
def categorize_fico(score):
    if score >= 740:
        return 'Excellent'
    elif score >= 680:
        return 'Good'
    elif score >= 620:
        return 'Fair'
    else:
        return 'Poor'

df['fico_category'] = df['fico_score_avg'].apply(categorize_fico)

# FICO Score Change
df['fico_change'] = df['last_fico_score_avg'] - df['fico_score_avg']
```

### üîç **‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏ô‡∏±‡∏î‡∏ä‡∏≥‡∏£‡∏∞ (Delinquency History)**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏Å‡∏≤‡∏£‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏° | Risk Impact |
|--------|--------|-----------|-----------|-------------|
| `delinq_2yrs` | Numeric | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ú‡∏¥‡∏î‡∏ô‡∏±‡∏î‡πÉ‡∏ô 2 ‡∏õ‡∏µ | 0 = ‡∏î‡∏µ, >0 = ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| `delinq_amnt` | Numeric | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞ | $0+ | ‚≠ê‚≠ê‚≠ê‚≠ê |
| `mths_since_last_delinq` | Numeric | ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏ô‡∏±‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î | ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ = ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ | ‚≠ê‚≠ê‚≠ê‚≠ê |
| `pub_rec` | Numeric | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞ | 0 = ‡∏î‡∏µ | ‚≠ê‚≠ê‚≠ê‚≠ê |
| `pub_rec_bankruptcies` | Numeric | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏°‡∏•‡∏∞‡∏•‡∏≤‡∏¢ | 0 = ‡∏î‡∏µ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |

#### **Delinquency Risk Score**
```python
# ‡∏™‡∏£‡πâ‡∏≤‡∏á Delinquency Risk Score
def calculate_delinq_score(row):
    score = 0
    
    # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏ô‡∏±‡∏î‡πÉ‡∏ô 2 ‡∏õ‡∏µ
    score += row['delinq_2yrs'] * 20
    
    # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞
    score += row['pub_rec'] * 15
    
    # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏°‡∏•‡∏∞‡∏•‡∏≤‡∏¢
    score += row['pub_rec_bankruptcies'] * 50
    
    # ‡∏•‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ñ‡πâ‡∏≤‡∏ú‡∏¥‡∏î‡∏ô‡∏±‡∏î‡∏ô‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß
    if not pd.isna(row['mths_since_last_delinq']):
        if row['mths_since_last_delinq'] > 24:
            score *= 0.5
        elif row['mths_since_last_delinq'] > 12:
            score *= 0.7
    
    return score

df['delinquency_risk_score'] = df.apply(calculate_delinq_score, axis=1)
```

### üí∞ **‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï (Credit Utilization)**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡πà‡∏≤‡∏î‡∏µ | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç |
|--------|--------|-----------|-----------|-----------|
| `revol_bal` | Numeric | ‡∏¢‡∏≠‡∏î‡∏´‡∏ô‡∏µ‡πâ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ($) | ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏î‡∏µ | ‚≠ê‚≠ê‚≠ê |
| `revol_util` | Numeric | ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô (%) | < 30% | ‚≠ê‚≠ê‚≠ê‚≠ê |
| `total_acc` | Numeric | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î | 10-20 | ‚≠ê‚≠ê‚≠ê |
| `open_acc` | Numeric | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà | ‡∏™‡∏°‡∏î‡∏∏‡∏• | ‚≠ê‚≠ê‚≠ê |

#### **Credit Utilization Analysis**
```python
# Credit Utilization Categories
def categorize_revol_util(util):
    if pd.isna(util):
        return 'Unknown'
    elif util <= 10:
        return 'Excellent'
    elif util <= 30:
        return 'Good'
    elif util <= 50:
        return 'Fair'
    else:
        return 'Poor'

df['revol_util_category'] = df['revol_util'].apply(categorize_revol_util)

# Credit Account Diversity
df['account_diversity'] = df['total_acc'] - df['open_acc']  # Closed accounts
df['account_utilization'] = df['open_acc'] / df['total_acc']  # Active ratio
```

### üîç **‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï (Credit Inquiries)**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏Å‡∏≤‡∏£‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏° | Risk Signal |
|--------|--------|-----------|-----------|-------------|
| `inq_last_6mths` | Numeric | ‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÉ‡∏ô 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô | > 2 = ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á | ‚≠ê‚≠ê‚≠ê‚≠ê |
| `inq_last_12m` | Numeric | ‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÉ‡∏ô 12 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô | > 4 = ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á | ‚≠ê‚≠ê‚≠ê |
| `mths_since_recent_inq` | Numeric | ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î | ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ | ‚≠ê‚≠ê‚≠ê |

#### **Inquiry Risk Analysis**
```python
# Credit Shopping Behavior
def analyze_inquiry_pattern(row):
    recent_inq = row['inq_last_6mths']
    total_inq = row['inq_last_12m'] if not pd.isna(row['inq_last_12m']) else recent_inq
    
    if recent_inq == 0:
        return 'No Recent Activity'
    elif recent_inq <= 2 and total_inq <= 4:
        return 'Normal Shopping'
    elif recent_inq <= 4 and total_inq <= 8:
        return 'Active Shopping'
    else:
        return 'Credit Seeking'

df['inquiry_pattern'] = df.apply(analyze_inquiry_pattern, axis=1)
```

---

## üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞ (Payment Information)

### üí∞ **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡∏∞‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Analysis |
|--------|--------|-----------|-----------|----------------|
| `out_prncp` | Numeric | ‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ($) | Portfolio Management | Current Performance |
| `out_prncp_inv` | Numeric | ‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô) ($) | Investor Returns | Current Performance |
| `total_pymnt` | Numeric | ‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡∏£‡∏ß‡∏° ($) | ROI Calculation | Historical Performance |
| `total_pymnt_inv` | Numeric | ‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡∏£‡∏ß‡∏° (‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô) ($) | Investor Returns | Historical Performance |
| `total_rec_prncp` | Numeric | ‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô ($) | Principal Recovery | Historical Performance |
| `total_rec_int` | Numeric | ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ($) | Interest Income | Historical Performance |

#### **Performance Metrics Calculation**
```python
# ROI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô
def calculate_investor_roi(row):
    if row['funded_amnt_inv'] > 0:
        total_return = row['total_pymnt_inv'] + row['recoveries']
        roi = (total_return - row['funded_amnt_inv']) / row['funded_amnt_inv']
        return roi
    return None

df['investor_roi'] = df.apply(calculate_investor_roi, axis=1)

# Payment Progress
df['payment_progress'] = (df['total_rec_prncp'] / df['funded_amnt']).fillna(0)

# Interest vs Principal
df['interest_ratio'] = df['total_rec_int'] / (df['total_rec_int'] + df['total_rec_prncp'])
```

### üìÖ **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô | Derived Features |
|--------|--------|-----------|-----------|------------------|
| `issue_d` | Date | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠ | Cohort Analysis | Loan Age |
| `earliest_cr_line` | Date | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å | Credit History Length | Credit Age |
| `last_pymnt_d` | Date | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ | Current Status | Days Since Payment |
| `last_credit_pull_d` | Date | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î | Data Freshness | Monitoring |

#### **Date-based Feature Engineering**
```python
# ‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
date_columns = ['issue_d', 'earliest_cr_line', 'last_pymnt_d']
for col in date_columns:
    df[col] = pd.to_datetime(df[col], errors='coerce')

# Credit History Length
df['credit_history_length'] = (df['issue_d'] - df['earliest_cr_line']).dt.days / 365.25

# Loan Age (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö current loans)
reference_date = pd.to_datetime('2015-01-01')  # Reference date
df['loan_age_months'] = ((reference_date - df['issue_d']).dt.days / 30.44).round()

# Seasonality
df['issue_month'] = df['issue_d'].dt.month
df['issue_quarter'] = df['issue_d'].dt.quarter
df['issue_year'] = df['issue_d'].dt.year
```

---

## üìà ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå

### üéØ **Feature Engineering ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ML Models**

#### **1. Risk Ratios**
```python
# Debt-to-Income Ratio
df['dti_cleaned'] = pd.to_numeric(df['dti'], errors='coerce')

# Payment-to-Income Ratio
df['payment_to_income'] = (df['installment'] * 12) / df['annual_inc']

# Total Debt Ratio
df['total_debt_ratio'] = (df['dti_cleaned'] * df['annual_inc'] / 100 + df['installment'] * 12) / df['annual_inc']
```

#### **2. Credit Health Scores**
```python
# Credit Health Score (0-100)
def calculate_credit_health(row):
    score = 50  # Base score
    
    # FICO Score contribution (40%)
    if not pd.isna(row['fico_score_avg']):
        fico_normalized = (row['fico_score_avg'] - 300) / (850 - 300)
        score += fico_normalized * 40
    
    # Utilization contribution (25%)
    if not pd.isna(row['revol_util']):
        util_score = max(0, (100 - row['revol_util']) / 100) * 25
        score += util_score
    
    # Delinquency contribution (-30%)
    delinq_penalty = row['delinq_2yrs'] * 10
    score -= delinq_penalty
    
    # Public records penalty
    pub_rec_penalty = row['pub_rec'] * 15
    score -= pub_rec_penalty
    
    return max(0, min(100, score))

df['credit_health_score'] = df.apply(calculate_credit_health, axis=1)
```

#### **3. Behavioral Indicators**
```python
# Credit Seeking Behavior
df['credit_seeking_intensity'] = (
    df['inq_last_6mths'].fillna(0) * 2 + 
    df['acc_open_past_24mths'].fillna(0)
)

# Financial Stability
df['employment_stability'] = df['emp_length_numeric'] * df['annual_inc'] / 1000

# Debt Management
df['debt_management_score'] = (
    100 - df['revol_util'].fillna(50) - 
    df['delinq_2yrs'].fillna(0) * 20 - 
    df['pub_rec'].fillna(0) * 30
)
```

### üé® **Categorical Encoding Strategies**

#### **1. Target Encoding**
```python
def target_encode(df, categorical_col, target_col, smoothing=10):
    # ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì global mean
    global_mean = df[target_col].mean()
    
    # ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì statistics per category
    category_stats = df.groupby(categorical_col)[target_col].agg(['mean', 'count'])
    
    # Apply smoothing
    category_stats['smoothed_mean'] = (
        (category_stats['mean'] * category_stats['count'] + global_mean * smoothing) /
        (category_stats['count'] + smoothing)
    )
    
    return category_stats['smoothed_mean'].to_dict()

# ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å
target_encoding_maps = {}
for col in ['purpose', 'addr_state', 'home_ownership']:
    target_encoding_maps[col] = target_encode(df, col, 'is_bad_loan')
    df[f'{col}_target_encoded'] = df[col].map(target_encoding_maps[col])
```

#### **2. Frequency Encoding**
```python
# Frequency encoding ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö high cardinality categories
for col in ['emp_title', 'zip_code']:
    freq_map = df[col].value_counts().to_dict()
    df[f'{col}_frequency'] = df[col].map(freq_map)
```

---

## ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### üö® **Data Leakage Issues**

#### **1. Future Information**
```python
# ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ future information (‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå)
future_leakage_vars = [
    'total_pymnt', 'total_pymnt_inv', 'total_rec_prncp', 'total_rec_int',
    'total_rec_late_fee', 'recoveries', 'collection_recovery_fee',
    'last_pymnt_d', 'last_pymnt_amnt', 'next_pymnt_d',
    'last_fico_range_low', 'last_fico_range_high'
]

# ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå
safe_vars = [
    'loan_amnt', 'term', 'int_rate', 'installment', 'grade', 'sub_grade',
    'emp_title', 'emp_length', 'home_ownership', 'annual_inc', 'verification_status',
    'purpose', 'dti', 'delinq_2yrs', 'fico_range_low', 'fico_range_high',
    'inq_last_6mths', 'open_acc', 'pub_rec', 'revol_bal', 'revol_util', 'total_acc'
]
```

#### **2. Target Leakage**
```python
# ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏°‡∏µ target leakage
potential_leakage = [
    'funded_amnt_inv',  # ‡∏≠‡∏≤‡∏à‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô
    'initial_list_status',  # ‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö loan quality
]

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö correlation ‡∏Å‡∏±‡∏ö target
for var in potential_leakage:
    if var in df.columns:
        corr = df[var].corr(df['is_bad_loan'])
        print(f"{var}: correlation = {corr:.3f}")
```

### üìä **Missing Data Strategies**

#### **1. Missing Data Analysis**
```python
def analyze_missing_data(df):
    missing_info = pd.DataFrame({
        'Variable': df.columns,
        'Missing_Count': df.isnull().sum(),
        'Missing_Percentage': (df.isnull().sum() / len(df)) * 100,
        'Data_Type': df.dtypes
    })
    
    missing_info = missing_info[missing_info['Missing_Count'] > 0].sort_values(
        'Missing_Percentage', ascending=False
    )
    
    return missing_info

missing_analysis = analyze_missing_data(df)
print(missing_analysis.head(10))
```

#### **2. Imputation Strategies**
```python
# ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£ impute ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£
imputation_strategies = {
    'credit_related': {
        'variables': ['mths_since_last_delinq', 'mths_since_last_record'],
        'method': 'high_value',  # Missing = ‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
        'value': 999
    },
    'financial_ratios': {
        'variables': ['revol_util', 'dti'],
        'method': 'median',
        'group_by': 'grade'
    },
    'employment': {
        'variables': ['emp_length'],
        'method': 'mode',
        'group_by': 'emp_title'
    }
}

# ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£ impute
df['revol_util_imputed'] = df.groupby('grade')['revol_util'].transform(
    lambda x: x.fillna(x.median())
)
```

### üéØ **Model Selection Considerations**

#### **1. Variable Importance**
```python
# ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
variable_groups = {
    'tier_1_critical': [
        'grade', 'sub_grade', 'fico_score_avg', 'dti', 'annual_inc'
    ],
    'tier_2_important': [
        'revol_util', 'delinq_2yrs', 'inq_last_6mths', 'emp_length_numeric'
    ],
    'tier_3_useful': [
        'home_ownership', 'purpose', 'open_acc', 'total_acc', 'pub_rec'
    ],
    'tier_4_supplementary': [
        'addr_state', 'credit_history_length', 'loan_size_category'
    ]
}
```

#### **2. Multi-collinearity Check**
```python
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö correlation matrix
import seaborn as sns
import matplotlib.pyplot as plt

numeric_vars = df.select_dtypes(include=[np.number]).columns
correlation_matrix = df[numeric_vars].corr()

# ‡∏´‡∏≤ highly correlated pairs
def find_high_correlation(corr_matrix, threshold=0.8):
    high_corr_pairs = []
    for i in range(len(corr_matrix.columns)):
        for j in range(i+1, len(corr_matrix.columns)):
            if abs(corr_matrix.iloc[i, j]) > threshold:
                high_corr_pairs.append((
                    corr_matrix.columns[i], 
                    corr_matrix.columns[j], 
                    corr_matrix.iloc[i, j]
                ))
    return high_corr_pairs

high_corr = find_high_correlation(correlation_matrix)
for var1, var2, corr in high_corr:
    print(f"{var1} - {var2}: {corr:.3f}")
```

---

*üìñ ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏ß‡∏£‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô data leakage ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå*

---
[‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà Dataset Overview](./03_dataset_overview.md) | [‚û°Ô∏è ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Business Questions](./05_business_questions.md)